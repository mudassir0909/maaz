/*! maaz - v0.0.0 - 2016-02-03
* Copyright (c) 2016 ; Licensed  */
(function(){this.Examination=function(){function a(a){this.title=a,this.results=[],this.id=App.examinations.length+1}return a.prototype.addGrade=function(a,b){return this.results.push(new Grade(a,b)),this.updateGPA()},a.prototype.updateGPA=function(){var a;return a=_(this.results).reduce(function(a,b){return a+b.grade},0),this.gpa=Number((a/this.results.length).toFixed(2))},a}()}).call(this),function(){this.Grade=function(){function a(a,b){if(this.grade=a,this.subject=_(App.subjects).findWhere({id:b}),null==this.subject)throw"Invalid subject_id"}return a}()}.call(this),function(){this.Subject=function(){function a(a){this.title=a,this.id=App.subjects.length+1}return a}()}.call(this),function(){var a=[].slice;this.App=function(){function b(){}return b.subjects=[],b.examinations=[],b.init=function(){return this.createSubjects("First Language","Second Language","English","Mathematics","Science","Social"),this.recordResults("Formative Assessment 1",[8,9,8,8,8,5]),this.recordResults("Formative Assessment 2",[9,8,8,7,7,9]),this.recordResults("Quarterly",[8,8,7,7,5,7]),this.recordResults("Formative Assessment 3",[9,9,8,7,8,9]),this.recordResults("Half Yearly",[9,7,7,5,9,9])},b.render=function(){return this.renderGPA(),this.renderChartForExaminations(),this.renderSubjectWiseCharts()},b.createSubject=function(a){var c;return c=new Subject(a),b.subjects.push(c),c},b.createSubjects=function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],_(b).each(this.createSubject)},b.createExamination=function(a){var b;return b=new Examination(a),this.examinations.push(b),b},b.recordResults=function(a,b){var c;return c=this.createExamination(a),_(this.subjects).each(function(a,d){return c.addGrade(b[d],a.id)})},b.renderGPA=function(){var a,b,c,d;return a=$("#gpa"),d="<b>Recent GPA: <%= gpa %> (<%= title %>)</b>",b=_(this.examinations).last(),c=_.template(d)(_(b).pick("gpa","title")),a.html(c)},b.renderChartForExaminations=function(){var a;return a=_(this.examinations).map(function(a){var b;return b=[a.title],_(a.results).each(function(a){return b.push(a.grade)}),b}),c3.generate({bindto:"#chart",data:{columns:a},axis:{x:{type:"category",categories:_(this.subjects).pluck("title")},y:{max:10,min:0,padding:{top:0,bottom:0}}}})},b.renderSubjectWiseCharts=function(){var a,b,c;return a=$("#panels-container"),c='<div class="panel panel-<%= panel_type %>">\n  <div class="panel-heading">\n    <h5 class="panel-title"><%= title %> <i class="fa fa-lg fa-<%= icon_type %>"></i></h5>\n  </div>\n\n  <div class="panel-body">\n    <div id="chart-<%= id %>"></div>\n  </div>\n</div>',b=_(this.examinations).pluck("title"),_(this.subjects).each(function(d){return function(e){var f,g,h,i,j,k;return f=[e.title],_(d.examinations).each(function(a){var b;return b=_(a.results).findWhere({subject:e}).grade,f.push(b)}),g=f[f.length-1]-f[f.length-2],g>0?(j="success",k="Improvement from the previous examination",i="smile-o"):0>g?(j="danger",k="Decline from the previous examination",i="frown-o"):(j="default",k="No change from the previous examination"),h=_.template(c)({title:e.title,id:e.id,panel_type:j,tooltip:k,icon_type:i}),a.append(h),c3.generate({bindto:"#chart-"+e.id,data:{columns:[f]},axis:{x:{type:"category",categories:b},y:{max:10,min:0,padding:{top:0,bottom:0}}}})}}(this))},b}()}.call(this);